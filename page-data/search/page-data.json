{"componentChunkName":"component---src-pages-search-tsx","path":"/search/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"rawMarkdownBody":"\n이글은 개인적인 블로그 글이며 기초적인 글은 생략되고 진행될수 있음을 말씀드립니다. \n\n<br/>\n\n## apigee 란\n apigee(아피지,애피지)란 GCP(Google Cloud Platform)의 API Gateway로 \n GCP와 상관 없는 다른 엔드포인트를 호출해서 사용할수 있다.\n\n## apigee 시작하기\n\n ### apigee 가입하기 [무료 평가판](https://cloud.google.com/apigee/api-management?hl=ko)\n  - 무료평가판은 60일 유지\n  - 카드 정보를 입력할 필요 없음\n  - 한달 기준 10만건 호출 가능\n\n ### apigee 프로젝트 만들기\n  #### API Proxies\n   - URL endpoint 지점 \n   - 배포 환경은 test, production 두가지가 존재 한다.\n   - 배포 환경별로 URL이 바뀐다.\n\n  #### API Products\n   - API Proxy를 묶는 그룹단위 개념 \n  \n  #### Apps \n   - ClientId랑 ClientSecret이 발급되는곳 \n   - Proudct를 Apps에 추가해주면 해당 키,토큰 값들이 이곳에 묶인다.\n\n ### OAuth 토큰 발급 프록시 만들기 \n   - [예시 토큰 번들 다운](https://github.com/apigee/api-platform-samples/blob/master/default-proxies/oauth/oauth.zip?raw=true)\n   - 프록시 생성 버튼을 누른다.\n   - Upload proxy bundle 누른다\n   - 다운받은 예시 번들을 업로딩 한다\n   - 해당 URL에 /accesstoken  추가하여 POST 타입으로 데이터 전송하면 토큰이 발급예정( 아직 clinetId랑 시크릿이 없어서 발급안됨 )\n\n ### OAuth 토큰 미들웨어 만들기\n   - 프록시 생성 버튼을 누른다.\n   - Reverse proxy (most common) 을 선택 한다.\n   - Existing API에  http://mocktarget.apigee.net 추가하고\n   - 다음을 누른후 Security 항목에 OAuth 2.0을 선택하고 next룰 누른다.\n   - Virtual Host 항목에 secure를 선택한다.\n   - Optional Deployment에 prod(production), test 룰 선택한다.\n   \n   \n ### API Proxies 를 Product에 추가한다\n  - 좌측 항목에 Publish안에 API Proudcts를 선택한다.\n  - Name, Display 항목에 내용을 채우고 아래 API resources 항목에 API proxies 항목에 Add a proxy를 선택한다.\n  - 전에 만든 토큰만들기, 토큰 미들웨어 프록시 항목을 추가하고 저장한다.\n  ![](Product.PNG)\n\n ### Apps를 이용하여 키 발급하기 ( Client_Id, Client_Secret)\n - 좌측 항목에 Publish 안에 Apps를 선택한다.\n - Name, Display Name 을 채우고 Credntials 항목에 키값의 시간을 정한다\n - 해당 우측에 Product 항목에 Add product를 누른다.\n \n  ![](Apps.PNG)\n  \n - Product를 발급하고 Restful Tool(ex:postman) 을 이용하여 발급받은 key, secret 항목을 넣어서 토쿤이 정상 발급되는지 테스트 해보면 된다.\n \n  ![](Token.PNG)\n   \n\n참조\n<hr/>\n\n[구글doc OAuth 기능 붙이기](https://docs.apigee.com/api-platform/tutorials/secure-calls-your-api-through-oauth-20-client-credentials?hl=ko)\n\n","excerpt":"이글은 개인적인 블로그 글이며 기초적인 글은 생략되고 진행될수 있음을 말씀드립니다.  apigee 란  apigee(아피지,애피지)란 GCP(Google Cloud Platform)의 API Gateway로 \n GCP…","fields":{"slug":"/apigee/"},"frontmatter":{"date":"Apr 22, 2020","title":"GCP apigee","tags":["apigee"],"update":"Apr 24, 2020"}}},{"node":{"rawMarkdownBody":"\n이글은 개인적인 블로그 글이며 기초적인 글은 생략되고 진행될수 있음을 말씀드립니다. \n\n<br/>\n\n## API Gateway란\n API 게이트웨이는 API 클라이언트와 서비스 사이에 프록시 처럼 위치하여\n 클라이언트로 부터 온 API 요청을 받아서, 서비스로 라우팅 하는 역할을 한다.\n 각각 서비스에서 구현해야 하는 기능을 API 게이트웨이 단에서 통합함으로써,\n 서비스 개발을 간편한게 할수 있고, 메세지 포멧 변경이나 플로우 컨트롤 같은\n 고급 기능을 사용하여 기존 API 호출에 추가적인 기능을 더 할수 있는\n 유연성을 가질수 있게 된다.\n\n## API Gateway의 대표적 기능 5가지\n\n### 인증\n API 호출할때, API 호출에 대한 인증을 수행한다.\n  - 서버간 API 통신일 경우에는 API Key 발급\n  - 다수의 클라이언트간의 통신일 경우에는 사용자 게정 인증(Oauth) 이후 JWT 토큰 발급\n\n### 모니터링, 로깅\n API 호출에 대한 모니터링을 통해서 API 별 모니터링을 할수 있다.\n  - API별 응답시간, 장애율, 호출 횟수를 모니터링 \n  - API별 호출 로깅\n  - Metering & Charging \n    API를 대외로 서비스 하는 경우 API의 호출량에 따라 과금이 붙는 경우에는 \n    호출 횟수를 통제할때 필요하다.\n\n### 메시지 플로우 컨트롤\n 메시지 플로우 컨트롤은 클라이언트로 부터 들어온 메시지의 흐름을 바꾸는 방법, 같은 API라도 \n  - 카날리 배포 : 버전에 따라서 구버전과 새버전으로 트래픡을 9:1로 라우팅 하는 방법\n  - 리전 변경 : 들어온 API의 클라이언트의 위치에 따라 미국이나 한국에 있는 서비스로 라우팅하는 로직\n\n### 메시지 변경\n 헤더에 있는 내용을 바디로 붙이거나, 다른 API를 호출해서 응답메시지를 \n 두 API를 합해서 응답을 해주는 기능등을 구현할수 있다.\n  - 프르토콜 변환 : SOAP/XML 기반의 메세지를 REST로 변환하는 기능\n  <br/>\n  - 호출 패턴 변환 : API 서버가 큐를 기반으로한 비동기 메시지 처리 패터일때, API 게이트웨이에서 이를\n    동기화 처리 패턴으로 변경해서 클라이언트 입장에서 동기로 호출을 하면 API서버에서는 비동기로 호출하느 형태와 같이 호출 패턴을 변경할수 있다.\n\n### 오케스트레이션 (매쉬업)\n API 클라이언트가 한번 호출할때 동시에 여러개의 API를 호출하도록 API 게이트웨이에서 호출 해주는 방식\n  - 클라이언트에서 `상품` API를 호출하면 API 게이트웨이가 `상품구매`,`상품 추천` API를 호출해서\n    상품 구매완료 메시지와 함께 추천 상품 리스트를 한번에 리턴하는 방식이다.","excerpt":"이글은 개인적인 블로그 글이며 기초적인 글은 생략되고 진행될수 있음을 말씀드립니다.  API Gateway란  API 게이트웨이는 API 클라이언트와 서비스 사이에 프록시 처럼 위치하여\n 클라이언트로 부터 온 API…","fields":{"slug":"/api-gateway/"},"frontmatter":{"date":"Apr 21, 2020","title":"API Gateway 정리","tags":["API Gateway"],"update":"Apr 21, 2020"}}},{"node":{"rawMarkdownBody":"\n회사에서 프로젝트를 진행하며 Oauth에 대한 종류에 대해서 공부한것을 정리할려고 합니다.\n\n크게 4종류만 소개하고 \nrefreshToken과 device는 제외하고 진행합니다.\n또한 개인적인 블로그 글이며 기초적인 글은 생략되고 진행될수 있음을 말씀드립니다. \n\n<br/>\n\n## OAuth\n\n### Resource Owner Password Credentials Grant Type (리소스 소유자 암호 자격 증명 타입)\n\n * Client에 아이디/패스워드를 받아 아이디/패스워드로 직접 access token을 받아오는 방식이다.\n * Client가 신용이 없을 때에는 사용하기에 위험하다는 단점이 있다. \n * 클라이언트가 확실한 신용이 보장될 때 사용할 수 있는 방식이다.\n\n![](ResourceOwnerPasswordCredentialsGrantType.png)\n\n<!-- \n```javascript\n['a', 'b', 'c'].includes('a') // true\n```\n\n코드를 보면 쉽게 역할을 알 수 있습니다.\n배열에 아이템이 존재하는지 Boolean 값을 반환합니다.\n\n이 함수로 이제 `['a','b','c'].indexOf('a') > -1` 대신 좀 더 간결한 코드가 가능합니다. -->\n\n### Client Credentials Grant Type (클라이언트 자격 증명 타입)\n\n * 애플리케이션이 Confidential Client일 때 id와 secret을 가지고 인증하는 방식이다. (기존 서버 방식)\n\n ![](ClientCredentialsGrantType.png)\n\n### Implicit Grant (암시적 승인)\n \n * Public Client인 브라우저 기반의 애플리케이션(Javascript application)이나 모바일 애플리케이션에서 바로 Resource Server에 접근하여 사용할 수 있는 방식이다.\n\n ![](ImplicitGrant.png)\n\n\n### Authorization Code Grant (권한 부여 코드 승인 타입)\n\n * 일반적인 웹사이트에서 소셜로그인과 같은 인증을 받을 때 가장 많이 쓰는 방식으로 \n   기본적으로 지원하고 있는 방식이다.\n\n ![](AuthorizationCodeGrant.png)","excerpt":"회사에서 프로젝트를 진행하며 Oauth에 대한 종류에 대해서 공부한것을 정리할려고 합니다. 크게 4종류만 소개하고 \nrefreshToken과 device…","fields":{"slug":"/oauth/"},"frontmatter":{"date":"Apr 21, 2020","title":"Oauth2.0에 대한 정리","tags":["Oauth2.0"],"update":"Apr 21, 2020"}}}]}},"pageContext":{}}}